{"ast":null,"code":"import { mapState } from \"vuex\";\nexport default {\n  name: 'MeetsList',\n  components: {},\n  watch: {\n    scroll() {\n      this.$store.commit(\"setScrollY\", window.scrollY);\n    }\n\n  },\n  props: {\n    scroll: {\n      type: Event\n    }\n  },\n  computed: { ...mapState([\"your_location\", \"lang\", \"activeFilter\", \"activeProvince\", \"scrollY\"])\n  },\n  methods: {\n    requestLocation() {\n      console.log(\"Requesting to make location API call\");\n      this.$geoAPI.init();\n    },\n\n    todaysDate(what) {\n      if (what === \"month\") {\n        if (this.lang === \"fr\") {\n          return new Date().toLocaleString('fr-FR', {\n            month: 'long'\n          });\n        } else {\n          return new Date().toLocaleString('en-US', {\n            month: 'long'\n          });\n        }\n      } else if (what === \"day\") {\n        return new Date().toString().split(\" \")[2];\n      }\n    },\n\n    showDropdownHandler() {\n      this.showDropdown = !this.showDropdown;\n      if (this.showDropdown) this.showProvDropdown = false;\n    },\n\n    showProvDropdownHandler() {\n      this.showProvDropdown = !this.showProvDropdown;\n      if (this.showProvDropdown) this.showDropdown = false;\n    },\n\n    location() {\n      if (!this.your_location || !this.your_location.city) {\n        return this.locationCTA;\n      }\n\n      return `${this.your_location.city}, ${this.your_location.state_code}, ${this.your_location.country}`;\n    },\n\n    sortByProvince(prov) {\n      if (prov.en === \"Canada-Wide\") {\n        this.meets = [...this.$meets];\n        this.meets_sorted_by_province = [...this.$meets];\n        this.showProvDropdown = false;\n        this.$store.commit(\"setActiveProvince\", prov);\n        this.sortBy(this.activeFilter);\n        return;\n      }\n\n      this.meets_sorted_by_province = [...this.$meets].filter(i => i.Province === prov.en);\n      this.meets = this.meets_sorted_by_province;\n      this.showProvDropdown = false;\n      this.$store.commit(\"setActiveProvince\", prov);\n      this.sortBy(this.activeFilter); // console.log(this.meets);\n    },\n\n    sortBy(km) {\n      // this.activeFilter = km;\n      this.$store.commit(\"setActiveFilter\", km); // Reset to default sortin with province filter, by date\n\n      if (km === \"Date\") {\n        this.meets = this.meets_sorted_by_province;\n        this.showDropdown = false;\n        return;\n      } // Sort by Distance closest to you\n\n\n      if (km === \"Distance\") {\n        this.meets = [...this.meets_sorted_by_province].sort((a, b) => a.DistanceFromMe - b.DistanceFromMe);\n        this.showDropdown = false;\n        return;\n      } // Within x km from you\n      else if (Number.isInteger(km)) {\n        // this.activeFilter = km;\n        this.$store.commit(\"setActiveFilter\", km);\n        this.showDropdown = false;\n        this.meets = [...this.meets_sorted_by_province].filter(i => i.DistanceFromMe <= km);\n        return;\n      }\n    }\n\n  },\n\n  data() {\n    return {\n      provinces: [{\n        en: 'Alberta',\n        fr: 'Alberta'\n      }, {\n        en: 'British Columbia',\n        fr: 'Colombie-Britannique'\n      }, {\n        en: 'Manitoba',\n        fr: 'Manitoba'\n      }, {\n        en: 'New Brunswick',\n        fr: 'Nouveau-Brunswick'\n      }, {\n        en: 'Newfoundland and Labrador',\n        fr: 'Terre-Neuve-et-Labrador'\n      }, {\n        en: 'Northwest Territories',\n        fr: 'Territoires du Nord-Ouest'\n      }, {\n        en: 'Nova Scotia',\n        fr: 'Nouvelle-Écosse'\n      }, {\n        en: 'Nunavut',\n        fr: 'Nunavut'\n      }, {\n        en: 'Ontario',\n        fr: 'Ontario'\n      }, {\n        en: 'Prince Edward Island',\n        fr: 'Île-du-Prince-Édouard '\n      }, {\n        en: 'Quebec',\n        fr: 'Québec'\n      }, {\n        en: 'Saskatchewan',\n        fr: 'Saskatchewan'\n      }, {\n        en: 'Yukon',\n        fr: 'Yukon'\n      }, {\n        en: 'Canada-Wide',\n        fr: 'À travers le Canada'\n      }],\n      meets: this.$meets,\n      meets_sorted_by_province: this.$meets,\n      showDropdown: false,\n      showProvDropdown: false,\n      locationCTA: \"Please enable location, then click me.\"\n    };\n  },\n\n  mounted() {\n    // if (this.your_location) \n    //   this.sortByProvince(this.provinces.find(i => i.en === this.your_location.state));\n    if (this.activeProvince === undefined) {\n      this.$store.commit(\"setActiveProvince\", {\n        en: 'Ontario',\n        fr: 'Ontario'\n      });\n    } else {\n      this.$store.commit(\"setActiveProvince\", this.activeProvince);\n    }\n\n    this.sortByProvince(this.activeProvince);\n    window.scrollTo(0, this.scrollY);\n  }\n\n};","map":{"version":3,"mappings":"AAmFA;AACA;EACAA,iBADA;EAEAC,cAFA;EAIAC;IACAC;MACA;IACA;;EAHA,CAJA;EASAC;IACAD;MACAE;IADA;EADA,CATA;EAcAC,YACA;EADA,CAdA;EAiBAC;IACAC;MACAC;MACA;IACA,CAJA;;IAKAC;MACA;QACA;UACA;YAAAC;UAAA;QACA,CAFA,MAEA;UACA;YAAAA;UAAA;QACA;MACA,CANA,MAOA;QACA;MACA;IAGA,CAlBA;;IAmBAC;MACA;MACA;IACA,CAtBA;;IAuBAC;MACA;MACA;IACA,CA1BA;;IA2BAC;MACA;QACA;MACA;;MACA;IACA,CAhCA;;IAiCAC;MACA;QACA;QACA;QACA;QACA;QACA;QACA;MACA;;MACA;MACA;MACA;MACA;MACA,+BAbA,CAcA;IAEA,CAjDA;;IAkDAC;MACA;MACA,0CAFA,CAGA;;MACA;QAEA;QACA;QACA;MACA,CATA,CAUA;;;MACA;QACA;QACA;QACA;MACA,CAJA,CAKA;MALA,KAMA;QACA;QACA;QACA;QACA;QACA;MACA;IAEA;;EA3EA,CAjBA;;EA8FAC;IACA;MACAC,YACA;QAAAC;QAAAC;MAAA,CADA,EAEA;QAAAD;QAAAC;MAAA,CAFA,EAGA;QAAAD;QAAAC;MAAA,CAHA,EAIA;QAAAD;QAAAC;MAAA,CAJA,EAKA;QAAAD;QAAAC;MAAA,CALA,EAMA;QAAAD;QAAAC;MAAA,CANA,EAOA;QAAAD;QAAAC;MAAA,CAPA,EAQA;QAAAD;QAAAC;MAAA,CARA,EASA;QAAAD;QAAAC;MAAA,CATA,EAUA;QAAAD;QAAAC;MAAA,CAVA,EAWA;QAAAD;QAAAC;MAAA,CAXA,EAYA;QAAAD;QAAAC;MAAA,CAZA,EAaA;QAAAD;QAAAC;MAAA,CAbA,EAcA;QAAAD;QAAAC;MAAA,CAdA,CADA;MAiBAC,kBAjBA;MAkBAC,qCAlBA;MAmBAC,mBAnBA;MAoBAC,uBApBA;MAqBAC;IArBA;EAuBA,CAtHA;;EAuHAC;IACA;IACA;IAEA;MACA;QAAAP;QAAAC;MAAA;IACA,CAFA,MAEA;MACA;IACA;;IACA;IACAO;EACA;;AAlIA","names":["name","components","watch","scroll","props","type","computed","methods","requestLocation","console","todaysDate","month","showDropdownHandler","showProvDropdownHandler","location","sortByProvince","sortBy","data","provinces","en","fr","meets","meets_sorted_by_province","showDropdown","showProvDropdown","locationCTA","mounted","window"],"sourceRoot":"src/components","sources":["MeetsList.vue"],"sourcesContent":["<template>\n  <div id=\"meets\" :class=\"lang === 'fr' ? 'fr' : 'en' \">\n     <!-- <div id=\"map\"></div> -->\n    <div class=\"title-section\">\n      <h1 class=\"header\">{{$header}}</h1>\n      <h2 class=\"pre-title\">{{$smalltext}}</h2>\n\n      <div class=\"today\">\n        <div class=\"small\" id=\"currentLocation\" @click=\"location() === locationCTA ? requestLocation() : null\">\n          <h3>\n            <img class=\"icon\" alt=\"Location icon\" src=\"../assets/white/Location.svg\"/>\n            <span v-html=\"location()\"></span>\n          </h3>\n        </div>\n\n        <div class=\"small\" id=\"currentDate\">\n        <h3>\n          <img class=\"icon\" alt=\"Calendar icon\" src=\"../assets/white/Calendar.svg\"/>\n          <div class=\"date\">\n            <span>\n              <h4>{{todaysDate(\"month\")}}</h4>\n              <h3>{{todaysDate(\"day\")}}</h3>\n            </span>\n          </div>\n        </h3>\n      </div>\n    </div>\n      <div class=\"select\">\n        <div :class=\"`dropdown-wrapper ${!your_location ? `disabled` : ``}`\">\n          <p class=\"label\">{{$sort_CTA}}</p>\n          <div class=\"dropdown\">\n            <p class=\"mainoption\" @click=\"showDropdownHandler\">{{Number.isInteger(activeFilter) ? (lang === \"fr\" ? `Rayon de ${activeFilter} km` : `Within ${activeFilter} km`) : activeFilter}} <span :class=\"`chevron ${showDropdown ? `up` : `down`}`\">▼</span></p>\n            <ul :style=\"showDropdown ? 'height: auto;' : 'height: 0%;'\">\n            <li @click=\"sortBy(`Date`)\">Date</li>\n              <li @click=\"sortBy(`Distance`)\">Distance</li>\n              <li @click=\"sortBy(10)\">{{lang === \"fr\" ?  `Rayon de 10 km` : `Within 10 km`}}</li>\n              <li @click=\"sortBy(20)\">{{lang === \"fr\" ?  `Rayon de 20 km` : `Within 20 km`}}</li>\n              <li @click=\"sortBy(50)\">{{lang === \"fr\" ?  `Rayon de 50 km` : `Within 50 km`}}</li>\n            </ul>\n          </div>\n        </div>\n        <div class=\"dropdown-wrapper\">\n          <p class=\"provincetitle label\">Province</p>\n          <div class=\"dropdown\">\n            <p class=\"mainoption\" @click=\"showProvDropdownHandler\">{{lang === \"fr\" ? activeProvince.fr : activeProvince.en}} <span :class=\"`chevron ${showProvDropdown ? `up` : `down`}`\">▼</span></p>\n            <ul :style=\"showProvDropdown ? 'height: auto; ' : 'height: 0%; '\">\n                <li v-for=\"(item, i) in provinces\" :key=\"i\" @click=\"sortByProvince(item)\">{{lang === \"fr\" ? item.fr : item.en}}</li>\n            </ul>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"meets_cards\" v-if=\"meets.length\">\n      <router-link class=\"meet_card_link\" name=\"meet_card_link\" v-for=\"(item, i) in meets\" :key=\"i\" :to=\"item.url ? `/${item.url}` : ``\">\n        <div :class=\"`meet_card ${item.Today ? `todaymeet` : ``}`\" :style=\"`background-image: url(${item.Image ? item.Image[0].url : ''})`\">\n          <div class=\"meet_card_inner\">\n              <div class=\"title\">\n                <h2 v-if=\"item.Name\">{{item.Name}}</h2>\n                <h2 v-else>Entering...</h2>\n                <h3 class=\"location\" v-if=\"item.Town && item.Province\">{{item.Town}}, {{item.Province}}</h3>\n              </div>\n              <div class=\"date\">\n                <span v-if=\"lang === 'en'\">\n                  <h4 class=\"month\" v-if=\"item.Month && item.Day\">{{item.Month.slice(0,3)}}{{item.Day}}</h4>\n                </span>\n                <span v-else-if=\"lang === 'fr'\">\n                  <h3 class=\"day\" v-if=\"item.Day\">{{item.Day}}</h3>\n                  <h4 class=\"month\" v-if=\"item.Month\">{{item.Month}}</h4>\n                </span>\n                <p class=\"time\"><span class=\"small\">{{item.Time}}</span></p>\n              </div>\n            </div>\n          \n        </div>\n      </router-link>\n    </div>\n    <div v-else>\n      <p>{{lang === \"fr\" ? 'Aucun résultat.' : 'No Results.'}}</p>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {mapState} from \"vuex\";\nexport default {\n  name: 'MeetsList',\n  components: {\n  },\n  watch: {\n    scroll() {\n      this.$store.commit(\"setScrollY\", window.scrollY);\n    }\n  },\n  props: {\n    scroll: {\n      type: Event\n    }\n  },\n  computed: {\n    ...mapState([\"your_location\", \"lang\", \"activeFilter\", \"activeProvince\", \"scrollY\"])\n  },\n  methods: {\n    requestLocation() {\n      console.log(\"Requesting to make location API call\");\n      this.$geoAPI.init();\n    },\n    todaysDate(what) {\n      if (what === \"month\") {\n        if (this.lang === \"fr\") {\n          return new Date().toLocaleString('fr-FR', { month: 'long'});\n        } else {\n          return new Date().toLocaleString('en-US', { month: 'long'});\n        }\n      }\n      else if (what === \"day\") {\n        return new Date().toString().split(\" \")[2];\n      }\n      \n  \n    },\n    showDropdownHandler() {\n      this.showDropdown = !this.showDropdown;\n      if (this.showDropdown) this.showProvDropdown = false;\n    },\n    showProvDropdownHandler() {\n      this.showProvDropdown = !this.showProvDropdown;\n      if (this.showProvDropdown) this.showDropdown = false;\n    },\n    location() {\n      if (!this.your_location || !this.your_location.city) {\n        return this.locationCTA;\n      }\n      return `${this.your_location.city}, ${this.your_location.state_code}, ${this.your_location.country}`;\n    },\n    sortByProvince(prov) {\n       if (prov.en === \"Canada-Wide\") {\n        this.meets = [...this.$meets];\n        this.meets_sorted_by_province = [...this.$meets];\n        this.showProvDropdown = false;\n        this.$store.commit(\"setActiveProvince\",  prov);\n        this.sortBy(this.activeFilter);\n        return;\n      }\n      this.meets_sorted_by_province = [...this.$meets].filter(i => i.Province === prov.en);\n      this.meets = this.meets_sorted_by_province;\n      this.showProvDropdown = false;\n      this.$store.commit(\"setActiveProvince\",  prov);\n      this.sortBy(this.activeFilter);\n      // console.log(this.meets);\n\n    },\n    sortBy(km) {\n      // this.activeFilter = km;\n      this.$store.commit(\"setActiveFilter\", km);\n      // Reset to default sortin with province filter, by date\n      if (km === \"Date\") {\n        \n        this.meets = this.meets_sorted_by_province;\n        this.showDropdown = false;\n        return;\n      }\n      // Sort by Distance closest to you\n      if (km === \"Distance\") {\n        this.meets = [...this.meets_sorted_by_province].sort((a, b) => a.DistanceFromMe - b.DistanceFromMe);\n        this.showDropdown = false;\n        return;\n      }\n      // Within x km from you\n      else if (Number.isInteger(km)) {\n        // this.activeFilter = km;\n      this.$store.commit(\"setActiveFilter\", km);\n        this.showDropdown = false;\n        this.meets = [...this.meets_sorted_by_province].filter(i => i.DistanceFromMe <= km);\n        return\n      }\n      \n    }\n  },\n  data() {\n    return {\n      provinces: [\n      {en: 'Alberta', fr: 'Alberta'},\n      {en: 'British Columbia', fr: 'Colombie-Britannique'},\n      {en: 'Manitoba', fr: 'Manitoba'},\n      {en: 'New Brunswick', fr: 'Nouveau-Brunswick'},\n      {en: 'Newfoundland and Labrador', fr:'Terre-Neuve-et-Labrador'},\n      {en: 'Northwest Territories', fr: 'Territoires du Nord-Ouest'},\n      {en: 'Nova Scotia', fr: 'Nouvelle-Écosse'},\n      {en: 'Nunavut', fr: 'Nunavut'},\n      {en: 'Ontario', fr: 'Ontario'},\n      {en: 'Prince Edward Island', fr: 'Île-du-Prince-Édouard '},\n      {en: 'Quebec', fr: 'Québec'},\n      {en: 'Saskatchewan', fr: 'Saskatchewan'},\n      {en: 'Yukon', fr: 'Yukon'},\n      {en: 'Canada-Wide', fr: 'À travers le Canada'}\n      ],\n      meets: this.$meets,\n      meets_sorted_by_province: this.$meets,\n      showDropdown: false,\n      showProvDropdown: false,\n      locationCTA: \"Please enable location, then click me.\",\n    }\n  },\n  mounted() {\n    // if (this.your_location) \n    //   this.sortByProvince(this.provinces.find(i => i.en === this.your_location.state));\n\n    if (this.activeProvince === undefined) {\n       this.$store.commit(\"setActiveProvince\", {en: 'Ontario', fr: 'Ontario'});\n    } else {\n      this.$store.commit(\"setActiveProvince\", this.activeProvince);\n    }\n    this.sortByProvince(this.activeProvince);\n    window.scrollTo(0, this.scrollY);\n  }\n  \n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"../styles.scss\";\n#meets {\n  // max-width: 1240px;\n  max-width: 700px;\n\n  padding: 150px 20px 40px;\n  margin: 40px auto 0;\n  //  @media screen and (max-width: 1239px){\n  //   max-width: 600px;\n  //  }\n}\n.today {\n  width: 100%;\n.small {\n  font-weight: 200;\n  font-size: 14px;\n  width: 50%;\n  display: inline-block;\n}\n  span {\n    text-transform: capitalize;\n  }\n  margin: 0;\n  display: inline-block;\n  vertical-align: middle;\n  span, img {\n    vertical-align: middle;\n  }\n}\nh1 {\n  color: white;\n  padding:0 0 20px;\n}\n\n.meet_card_link {\n  display:inline-block;\n  max-width: 700px;\n  width: 100%;\n  // @media screen and (min-width: 1240px){\n  //   padding: 0 10px;\n  // }\n  &:not(:last-child) {\n    .meet_card {\n      margin: 0 auto 20px;\n    }\n  }\n}\n\n.meets_cards {\n  margin: auto;\n  text-align: center;\n\n}\n.meet_card {\n  background: black;\n  min-height: 150px;\n  border-radius: 10px;\n  background-size: cover;\n  background-repeat: no-repeat;\n  background-position: center;\n  overflow: hidden;\n  color: white;\n  padding: 20px;\n  position: relative;\n  &:after {\n    content:'';\n    position: absolute;\n    left: 0;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    background: rgb(30,30,30);\n    background: linear-gradient(0deg, rgba(30,30,30,0.8856136204481793) 0%, rgba(20,20,20,0.6167060574229692) 47%, rgba(0,0,0,0) 100%);\n    z-index: 0;\n    pointer-events: none;\n  }\n}\n\n.dropdown {\n\n  p:hover {\n    background: #959595;\n    transition: all .5s ease;\n  }\n  p {\n    transition: all .5s ease;\n\n  }\n  .chevron {\n    display: inline-block;\n    position: absolute;\n    right: 20px;\n    transition: all .5s ease;\n    z-index: 3;\n  }\n  .up {\n    transform:rotate(180deg);\n    transition: all .5s ease;\n    transform-origin: center;\n  }\n  .mainoption {\n    cursor: pointer;\n    border-radius: 10px;\n  }\n  position: relative;\n  p {\n    margin: 0;\n    padding: 10px;\n    background: #424242;\n    width: calc(100% - 20px);\n    display: block;\n  }\n  ul {\n    overflow: hidden;\n    list-style: none;\n    position: absolute;\n    top: 100%;\n    left: 0;\n    z-index: 5;\n    width: 100%;\n    margin-top: 0;\n    padding: 0;\n    max-height: 200px;\n    overflow: scroll;\n  }\n  li {\n    width: calc(100% - 20px);\n    background: #424242;\n    padding: 10px 0 10px 10px;\n    cursor: pointer;\n    font-family: Helvetica;\n      transition: all .5s ease;\n    border-bottom: 1px solid #424242;\n    &:hover {\n      transition: all .5s ease;\n      background: grey;\n    }\n  }\n}\n\n#currentDate {\n  text-align: right;\n  vertical-align: middle;\n}\n\n.icon {\n  width: 20px;\n  padding-right: 10px;\n  vertical-align: middle;\n}\n\n.title {\n  text-align: left;\n  vertical-align: bottom;\n  height: 100%;\n  display: inline-block;\n  width: 75%;\n  h2 {\n    font-family: \"Reservation Wide Blk\";\n    font-weight: 100;\n    line-height: 1.15;\n  }\n}\n.date {\n  // width: 25%;\n  text-align: right;\n  vertical-align: middle;\n  display: inline-block;\n\n  p {\n    margin: 0;\n  }\n  .day {\n    font-family: 'Reservation Wide Blk';\n    font-size: 30px;\n    margin: 0;\n    display: inline-block;\n    height: 100%;\n    @media screen and (max-width: 800px) {\n        font-size: 18px;\n        line-height: 1.2;\n    }\n  }\n  h3 {\n    font-family: \"Reservation Wide Blk\";\n    font-size: 30px;\n    margin: 0;\n    display: inline-block;\n    height: 100%;\n    color: $highlightcol;\n  }\n  h4 {\n    color: $highlightcol;\n\n  }\n}\n\n.pre-title {\n  margin-bottom: 40px;\n  font-family: Helvetica;\n}\n.meet_card_inner {\n  position: absolute;\n  width: calc( 100% - 40px);\n  bottom: 20px;\n  z-index: 1;\n  .date {\n    width: 25%;\n  }\n}\n.location {\n  color: white;\n  font-weight: 100 !important;\n  font-family: 'ReservationWide-Regular' !important;\n}\n.header, .select {\n  display: inline-block;\n}\n.select {\n  .dropdown-wrapper {\n    display: inline-block;\n    width: calc(50% - 10px);\n    &:first-child {\n      padding-right: 20px;\n    }\n  }\n width: 100%;\n padding-bottom: 20px;\n vertical-align: middle;\n .label {\n  padding-bottom: 5px;\n  margin: 0;\n }\n}\n.header {\n  width: 100%;\n  margin-bottom: 10px;\n}\n.meet_card_link-enter-active {\n  transition: all .5s ease;\n  min-height: 0;\n}\n\n.meet_card_link-enter-to {\n    transition: all .5s ease;\n    min-height: 150px;\n}\n.meet_card_link-leave-to {\n  min-height: 0;\n}\n\n\n.todaymeet {\n  &:before {\n    content: 'Today!';\n    position: absolute;\n    left: 0;\n    top: 0;\n    background: $highlightcol;\n    padding: 20px;\n    z-index: 4;\n    font-family: \"Reservation Wide Bd\";\n    pointer-events: none;\n  }\n}\n\n#currentLocation {\n  vertical-align: middle;\n  cursor: pointer;\n  img {\n    display: inline-block;\n  }\n  h3 span {\n    font-family: \"Reservation Wide Bd\";\n    color: $highlightcol;\n    // font-size: 20px;\n    width: calc(100% - 30px);\n    display: inline-block;\n  }\n}\n#map { \n  height: 180px;\n}\n.time {\n  padding-top: 10px;\n  .small {\n    @media screen and (max-width: 800px) {\n      font-size: 12px;\n      line-height: 1.2;\n    }\n  }\n}\n.title-section {\n  padding-bottom: 30px;\n}\n.provincetitle {\n  padding-top: 20px;\n}\n.fr .todaymeet {\n  &:before {\n    content: 'Aujourd`hui!' !important;\n  }\n}\n.disabled {\n  filter: invert(.4);\n  pointer-events: none;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}