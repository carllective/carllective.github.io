{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\n\n/* eslint-disable no-unused-vars */\nimport * as htmlToImage from 'html-to-image';\nimport domtoimage from \"dom-to-image\";\nimport { mapState } from \"vuex\";\n\nvar L = require('leaflet');\n\nvar download = require(\"downloadjs\");\n\nexport default {\n  name: 'MeetsPage',\n  components: {},\n  watch: {},\n  computed: { ...mapState([\"lang\"])\n  },\n  methods: {\n    parsedInfo(string) {\n      var parsed = string.replace(/(?:\\r\\n|\\r|\\n)/g, '<br />');\n      return parsed;\n    },\n\n    renderMap() {\n      return new Promise(res => {\n        this.map = L.map('map', {\n          center: [this.info.Lat, this.info.Long],\n          zoom: 12\n        });\n        L.tileLayer('https://a.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png', {\n          attribution: '<a href=\"https://carto.com/\" target=\"_blank\">&copy; CARTO</a> <a href=\"https://www.maptiler.com/copyright/\" target=\"_blank\">&copy; MapTiler</a> <a href=\"https://www.openstreetmap.org/copyright\" target=\"_blank\">&copy; OpenStreetMap contributors</a>'\n        }).addTo(this.map);\n        var meetsIconToday = L.icon({\n          iconUrl: require('../assets/C_Map_Marker_Car_Meets_TODAY.png'),\n          iconSize: [30, 42],\n          iconAnchor: [15, 42]\n        });\n        L.marker([this.info.Lat, this.info.Long], {\n          icon: meetsIconToday\n        }).addTo(this.map);\n        res(this.map);\n      });\n    },\n\n    isolate(opt) {\n      if (opt === `prompt`) {\n        this.isolated = true;\n      } else {\n        this.isolated = false;\n      }\n\n      if (this.isolated) {\n        document.getElementById(\"banner\").style = `\n          position: fixed;\n          top: 0;\n          width: 100%;\n          z-index: 100;\n          height: 100%;\n          margin-bottom: 100px;\n          cursor: pointer;\n      `;\n        document.getElementById(\"info\").style = `\n          padding-bottom: 50px;\n      `;\n      } else {\n        document.getElementById(\"banner\").style = ``;\n        document.getElementById(\"info\").style = `\n          padding-bottom: 20px;\n      `;\n      }\n    },\n\n    resizeImage(img) {\n      const defaults = `position: absolute;\n            display: block;\n            left: 50%;\n            top: 50%;\n            transform: translateY(-50%)  translateX(-50%);`; // bannerimagewrapper height\n      //image height\n\n      var calculatedWidth = window.innerWidth / this.info.Image[0].width * this.info.Image[0].height;\n      var bannerWrapperHeight = document.getElementById(\"bannerimagewrapper\").getBoundingClientRect().height; // console.log(bannerWrapperHeight, calculatedWidth);\n\n      if (img.width > img.height || calculatedWidth < bannerWrapperHeight) {\n        document.getElementById(\"bannerimage\").style = `\n          height: 100%;\n          ${defaults}\n          `;\n      } else {\n        // this.resizeBannerImageWrapper();\n        document.getElementById(\"bannerimage\").style = `\n          width: 100%;\n          ${defaults}\n        `;\n      }\n    },\n\n    instagramsLink(item) {\n      if (item.includes(\"@\")) {\n        return `https://www.instagram.com/${item.split(\"@\")[1]}`;\n      } else if (item.includes(\"#\")) {\n        return `https://www.instagram.com/explore/tags/${item.split(\"#\")[1]}`;\n      }\n    },\n\n    screenGrab() {\n      console.log(this.info.id);\n      var div = document.getElementById('banner');\n      htmlToImage.toPng(div).then(dataUrl => {\n        console.log(dataUrl); // download(dataUrl);\n      }, err => {\n        console.warn(err);\n      });\n    }\n\n  },\n\n  data() {\n    return {\n      info: null,\n      map: null,\n      dataUrl: ``,\n      isolated: false,\n      instagrams: []\n    };\n  },\n\n  beforeDestroy() {// window.removeEventListener(\"resize\", () => this.resizeImage(this.info.Image[0]));\n  },\n\n  mounted() {\n    // document.webkitCancelFullScreen();\n    window.scrollTo(0, 0);\n    new Promise(res => {\n      // try {\n      this.info = this.$meets.filter(i => `/${i.url}` === window.location.pathname)[0];\n      console.log();\n      res(this.info);\n\n      if (this.info.Instagram) {\n        this.instagrams = this.info.Instagram.split(\"\\n\");\n      } // } catch {\n      //   window.location.href = \"/\";\n      // }\n\n    }).then(() => {\n      this.renderMap();\n      this.$nextTick(() => {\n        // this.resizeImage(this.info.Image[0]);\n        window.addEventListener(\"resize\", () => this.resizeImage(this.info.Image[0]));\n      });\n    });\n  }\n\n};","map":{"version":3,"mappings":";;AAmEA;AACA;AACA;AACA;;AACA;;AACA;;AACA;EACAA,iBADA;EAEAC,cAFA;EAIAC,SAJA;EAOAC,YACA;EADA,CAPA;EAWAC;IACAC;MACA;MACA;IACA,CAJA;;IAKAC;MACA;QAEA;UACAC,uCADA;UAEAC;QAFA;QAIAC;UAAAC;QAAA;QAEA;UACAC,8DADA;UAEAC,kBAFA;UAGAC;QAHA;QAMAJ;UAAAK;QAAA;QAEAC;MACA,CAjBA;IAmBA,CAzBA;;IA0BAC;MACA;QACA;MACA,CAFA,MAEA;QACA;MACA;;MACA;QACAC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OARA;QASAA;AACA;AACA,OAFA;MAGA,CAbA,MAaA;QACAA;QACAA;AACA;AACA,OAFA;MAGA;IAEA,CApDA;;IAqDAC;MACA;AACA;AACA;AACA;AACA,2DAJA,CADA,CAOA;MACA;;MACA;MACA,uGAVA,CAWA;;MAEA;QACAD;AACA;AACA;AACA,WAHA;MAIA,CALA,MAKA;QACA;QACAA;AACA;AACA;AACA,SAHA;MAIA;IACA,CA9EA;;IAgFAE;MACA;QACA;MACA,CAFA,MAGA;QACA;MACA;IACA,CAvFA;;IAyFAC;MACAC;MACA;MACAC,uBACAC,IADA,CACAC;QACAH,qBADA,CAEA;MACA,CAJA,EAIAI;QACAJ;MACA,CANA;IAOA;;EAnGA,CAXA;;EAiHAK;IACA;MACAC,UADA;MAEAC,SAFA;MAGAJ,WAHA;MAIAK,eAJA;MAKAC;IALA;EAOA,CAzHA;;EA0HAC,iBACA;EACA,CA5HA;;EA6HAC;IACA;IACAC;IACA;MACA;MACA;MACAZ;MACAN;;MACA;QACA;MACA,CAPA,CAQA;MACA;MACA;;IACA,CAXA,EAWAQ,IAXA,CAWA;MACA;MACA;QACA;QACAU;MACA,CAHA;IAIA,CAjBA;EAkBA;;AAlJA","names":["name","components","watch","computed","methods","parsedInfo","renderMap","center","zoom","L","attribution","iconUrl","iconSize","iconAnchor","icon","res","isolate","document","resizeImage","instagramsLink","screenGrab","console","htmlToImage","then","dataUrl","err","data","info","map","isolated","instagrams","beforeDestroy","mounted","window"],"sourceRoot":"src/components","sources":["MeetsPage.vue"],"sourcesContent":["\n<template>\n  <div id=\"meetspage\">\n    <div class=\"snapshot\">\n      <a @click=\"isolate(`prompt`)\">\n      <img  src=\"../assets/snapshot.png\"/> <p>Fullscreen Banner</p>\n      </a>\n    </div>\n    <div class=\"banner\" id=\"banner\" v-if=\"info\" @click=\"isolate(``)\">\n    <div class=\"banner-image-wrapper\" ref=\"bannerimagewrapper\" id=\"bannerimagewrapper\" :style=\"`background-image: url(${info.Image ? info.Image[0].url : ''});`\">\n      <!-- <img class=\"banner-image\" ref=\"bannerimage\" id=\"bannerimage\" :src=\"`${info.Image ? info.Image[0].url : ''})`\" /> -->\n    </div>\n    <div class=\"logo\">\n      <img src=\"../assets/Icon.png\"/>\n    </div>\n      <div class=\"info\" id=\"info\">\n        <div class=\"instagrams\" v-if=\"instagrams.length\">\n          <transition v-for=\"(item, i) in instagrams\" :key=\"i\">\n            <a :href=\"instagramsLink(item)\" target=\"_blank\">\n              <small v-html=\"item\"></small>\n            </a>\n          </transition>\n        </div>\n        \n        <br/>\n        <div class=\"title\">\n          <h1 v-if=\"info.Name\">{{info.Name}}</h1>\n        </div>\n        <div class=\"location\">\n          <p class=\"addy\" v-if=\"info.Address\">{{info.Address}}</p>\n          <h3 v-if=\"info.Town\">{{info.Town}}, {{info.Province}}</h3>\n        </div>\n        <div class=\"date\">\n          <span v-if=\"lang === 'en'\">\n            <h4 class=\"month\" v-if=\"info.Month\">{{info.Month}}</h4>\n            <h3 class=\"day\" v-if=\"info.Day\">{{info.Day}}</h3>\n        </span>\n        <span v-else>\n            <h3 class=\"day\" v-if=\"info.Day\">{{info.Day}}</h3>\n            <h4 class=\"month\" v-if=\"info.Month\">{{info.Month}}</h4>\n        </span>\n         <p class=\"time\">{{info.Time}}</p>\n        </div>\n      </div>\n    </div>\n    <img :src=\"dataUrl\" v-if=\"dataUrl\"/>\n\n    <div class=\"page-wrapper\">\n        <div id=\"map\"></div>\n\n    <div class=\"page\"  v-if=\"info\">\n    \n      <div v-if=\"info.Info\">\n       <h2>{{lang === \"en\" ? \"Details\" : \"Détails\"}}</h2>\n        <p v-html=\"parsedInfo(info.Info)\"></p>\n      </div>\n        <div class=\"ctas\">\n          <a class=\"button\" target=\"_blank\" v-if=\"info.Calendar_Link\" :href=\"info.Calendar_Link\">{{lang === \"en\" ? \"Save To Calendar\" : \"Télécharger dans le Calendrier\"}}</a>\n          <a class=\"button\" target=\"_blank\" v-if=\"info.Website_Link\" :href=\"info.Website_Link\">{{lang === \"en\" ? \"Visit Website\" : \"Consulter le Site-web\"}}</a>\n          <a class=\"button\" target=\"_blank\" v-if=\"info.Buy_Tickets_Link\" :href=\"info.Buy_Tickets_Link\">{{lang === \"en\" ? \"Buy Tickets\" : \"Acheter des Billets\"}}</a>\n        </div>\n    </div>\n    </div>\n  </div>\n</template>\n\n<script>\n/* eslint-disable no-unused-vars */\nimport * as htmlToImage from 'html-to-image';\nimport domtoimage from \"dom-to-image\";\nimport {mapState} from \"vuex\";\nvar L = require('leaflet');\nvar download = require(\"downloadjs\");\nexport default {\n  name: 'MeetsPage',\n  components: {\n  },\n  watch: {\n\n  },\n  computed: {\n    ...mapState([ \"lang\"])\n    \n  },\n  methods: {\n    parsedInfo(string) {\n      var parsed = string.replace(/(?:\\r\\n|\\r|\\n)/g, '<br />');\n      return parsed;\n    },\n    renderMap() {\n      return new Promise((res) => {\n        \n        this.map = L.map('map', {\n            center: [this.info.Lat , this.info.Long],\n            zoom: 12\n        });\n        L.tileLayer('https://a.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png', {attribution: '<a href=\"https://carto.com/\" target=\"_blank\">&copy; CARTO</a> <a href=\"https://www.maptiler.com/copyright/\" target=\"_blank\">&copy; MapTiler</a> <a href=\"https://www.openstreetmap.org/copyright\" target=\"_blank\">&copy; OpenStreetMap contributors</a>'}).addTo(this.map);\n        \n        var meetsIconToday = L.icon({\n          iconUrl: require('../assets/C_Map_Marker_Car_Meets_TODAY.png'),\n          iconSize: [30, 42],\n          iconAnchor: [15, 42],\n      });\n\n      L.marker([this.info.Lat, this.info.Long], {icon: meetsIconToday}).addTo(this.map);\n        \n        res(this.map);\n      })\n      \n    },\n    isolate(opt) {\n      if (opt === `prompt`) {\n        this.isolated = true;\n      } else {\n        this.isolated = false;\n      }\n      if (this.isolated) {\n        document.getElementById(\"banner\").style = `\n          position: fixed;\n          top: 0;\n          width: 100%;\n          z-index: 100;\n          height: 100%;\n          margin-bottom: 100px;\n          cursor: pointer;\n      `;\n      document.getElementById(\"info\").style = `\n          padding-bottom: 50px;\n      `\n      } else {\n         document.getElementById(\"banner\").style = ``;\n         document.getElementById(\"info\").style = `\n          padding-bottom: 20px;\n      `\n      }\n  \n    },\n    resizeImage(img) {\n      const defaults = `position: absolute;\n            display: block;\n            left: 50%;\n            top: 50%;\n            transform: translateY(-50%)  translateX(-50%);`;\n\n            // bannerimagewrapper height\n            //image height\n            var calculatedWidth = window.innerWidth / this.info.Image[0].width * this.info.Image[0].height;\n            var bannerWrapperHeight = document.getElementById(\"bannerimagewrapper\").getBoundingClientRect().height;\n            // console.log(bannerWrapperHeight, calculatedWidth);\n\n      if (img.width > img.height || calculatedWidth < bannerWrapperHeight) {\n        document.getElementById(\"bannerimage\").style = `\n          height: 100%;\n          ${defaults}\n          `;\n      } else {\n        // this.resizeBannerImageWrapper();\n        document.getElementById(\"bannerimage\").style =  `\n          width: 100%;\n          ${defaults}\n        `;\n      }\n    },\n\n    instagramsLink(item) {\n      if (item.includes(\"@\")) {\n        return `https://www.instagram.com/${item.split(\"@\")[1]}`;\n      }\n      else if (item.includes(\"#\")) {\n        return `https://www.instagram.com/explore/tags/${item.split(\"#\")[1]}`;\n      }\n    },\n\n    screenGrab() {\n      console.log(this.info.id);\n      var div = document.getElementById('banner');\n      htmlToImage.toPng(div)\n        .then((dataUrl) => {\n          console.log(dataUrl);\n        // download(dataUrl);\n        }, err => {\n          console.warn(err);\n        });\n    }\n  },\n\n  data() {\n    return {\n      info:null,\n      map: null,\n      dataUrl: ``,\n      isolated: false,\n      instagrams: []\n    }\n  },\n  beforeDestroy() {\n    // window.removeEventListener(\"resize\", () => this.resizeImage(this.info.Image[0]));\n  },\n  mounted() {\n    // document.webkitCancelFullScreen();\n    window.scrollTo(0, 0);\n    new Promise((res) => {\n      // try {\n        this.info = this.$meets.filter(i => `/${i.url}` === window.location.pathname)[0];\n        console.log()\n        res(this.info);\n        if (this.info.Instagram) {\n          this.instagrams = this.info.Instagram.split(\"\\n\");\n        }\n      // } catch {\n      //   window.location.href = \"/\";\n      // }\n    }).then(() =>{\n      this.renderMap();\n      this.$nextTick(() => {\n        // this.resizeImage(this.info.Image[0]);\n        window.addEventListener(\"resize\", () => this.resizeImage(this.info.Image[0]));\n      })\n    });\n  }\n  \n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"../styles.scss\";\n#meetspage {\n  min-height: 100vh;\n  background: white;\n  overscroll-behavior: none;\n  overflow-x: hidden;\n}\n.page {\n  padding: 60px 20px;\n  margin: 0 auto;\n  display: inline-block;\n  @media screen and (max-width: 800px) {\n    width: 100%;\n  }\n  @media screen and (min-width: 801px) {\n    width: 50%;\n  }\n}\n.banner {\n  height: 80vh;\n  background-size: cover;\n  background-repeat: no-repeat;\n  background-position: center;\n  position: relative;\n  background-color: black;\n  overflow: hidden;\n    &:after {\n      content:'';\n      position: absolute;\n      left: 0;\n      bottom: -1px;\n      width: 100%;\n      height: 60%;\n      background: rgb(0,0,0);\n      background: linear-gradient(0deg, rgba(0,0,0,1) 0%, rgba(20,20,20,0.6167060574229692) 47%, rgba(0,0,0,0) 100%);\n      z-index: 0;\n      pointer-events: none;\n    }\n}\n.title, .date, .location {\n  display: inline-block;\n  vertical-align: middle;\n}\n\n.title {\n  margin-left: 20px;\n  max-width: calc(100% - 40px);\n}\n.date {\n  text-align: right;\n  right: 20px;\n  // position: absolute;\n  bottom: 20px;\n  z-index: 1;\n  width: calc(30% - 20px);\n}\n.location {\n  width: calc(70% - 40px);\n  margin: 0 20px;\n}\n.addy {\n  margin-top: 0;\n}\n\n.time {\n  margin-bottom: 0;\n  color: $highlightcol;\n}\n\n.info {\n  position: absolute;\n  bottom: 0;\n  z-index: 1;\n  max-width: 900px;\n  width: 100%;\n  left: 50%;\n  transform: translateX(-50%);\n  padding-bottom: 20px;\n}\n.day {\n  font-family: 'Reservation Wide Blk';\n  font-size: 30px;\n  color: $highlightcol;\n  padding-bottom: 5%;\n}\n.month {\n  color: $highlightcol;\n}\n.page {\n  @media screen and (min-width: 801px) {\n    width: calc(50% - 60px);\n  }\n  @media screen and (max-width: 800px) {\n    width: calc(100% - 40px);\n  }\n  h2, p {\n    color: black;\n  }\n}\n.pageinfo {\n  width: 100%;\n  p {\n    margin-top: 10px;\n  }\n  td {\n    padding-bottom: 40px;\n    &:last-child {\n      padding-left: 20px;\n    }\n  }\n}\n.button {\n  &:not(.fullwidth) {\n    width: calc(50% - 20px);\n  }\n  margin: 10px;\n}\n.fullwidth {\n    width: calc(100% - 20px);\n    background: $highlightcol;\n}\n.ctas {\n  padding-top: 40px;\n}\n#map {\n  \n  @media screen and (max-width: 800px) {\n    height: 200px;\n    width: 100%;\n  }\n  @media screen and (min-width: 801px) {\n    width: 50%;\n    min-height: 500px;\n    height: 100%;\n  }\n  \n  display: inline-block;\n  margin-right: 20px;\n  z-index: 0;\n}\n#map, .page {\n  vertical-align: middle;\n}\nsmall {\n  margin-left: 20px;\n  display: inline-block;\n  font-size: 14px;\n  font-family: Helvetica;\n  color: black;\n  background: white;\n  padding: 10px;\n  border-radius: 100px;\n}\n#canvas {\n  width: 100%;\n  background: black;\n  // min-height: 80vh;\n}\n// #banner {\n//   width: 600px;\n// }\n.snapshot {\n  position: absolute;\n  z-index: 2;\n  top: 180px;\n  right: 20px;\n  padding-right: 10px;\n  border-radius: 100px;\n  background: black;\n  cursor: pointer;\n  img {\n    width: 25px;\n  }\n  img, p {\n    display: inline-block;\n    margin: 0;\n    vertical-align: middle;\n    font-size: 10px;\n  }\n}\n.logo img {\n  position: absolute;\n  top: 20px;\n  left: 20px;\n  width: 60px;\n}\n.banner-image-wrapper {\n  height: 100%;\n  position: relative;\n  background-size: cover;\n  background-position: center;\n  background-repeat: no-repeat;\n  img {\n      &:after {\n      content:'';\n      position: absolute;\n      left: 0;\n      bottom: -1px;\n      width: 100%;\n      height: 60%;\n      background: rgb(0,0,0);\n      background: linear-gradient(0deg, rgba(0,0,0,1) 0%, rgba(20,20,20,0.6167060574229692) 47%, rgba(0,0,0,0) 100%);\n      z-index: 0;\n      pointer-events: none;\n    }\n  }\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}